<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ausgaben-Tracker</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: #f5f5f5;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #2c3e50;
            text-align: center;
            margin-bottom: 30px;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 30px;
        }
        th, td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
        th {
            background-color: #3498db;
            color: white;
            font-weight: bold;
        }
        tr:nth-child(even) {
            background-color: #f9f9f9;
        }
        tr:hover {
            background-color: #e8f4fd;
        }
        .category-lebensmittel { color: #27ae60; font-weight: bold; }
        .category-getr√§nke { color: #3498db; font-weight: bold; }
        .category-hygiene { color: #e74c3c; font-weight: bold; }
        .category-haushalt { color: #f39c12; font-weight: bold; }
        .category-snacks { color: #9b59b6; font-weight: bold; }
        
        .summary-section {
            background: #ecf0f1;
            padding: 20px;
            border-radius: 8px;
            margin-top: 20px;
        }
        .summary-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }
        .summary-card {
            background: white;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            border-left: 4px solid #3498db;
        }
        .summary-card.lebensmittel { border-left-color: #27ae60; }
        .summary-card.getranke { border-left-color: #3498db; }
        .summary-card.hygiene { border-left-color: #e74c3c; }
        .summary-card.haushalt { border-left-color: #f39c12; }
        .summary-card.snacks { border-left-color: #9b59b6; }
        
        .summary-card h3 {
            margin: 0 0 10px 0;
            font-size: 14px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        .summary-card .amount {
            font-size: 24px;
            font-weight: bold;
            color: #2c3e50;
        }
        .summary-card .percentage {
            font-size: 12px;
            color: #7f8c8d;
            margin-top: 5px;
        }
        .total-summary {
            background: #2c3e50;
            color: white;
            text-align: center;
            padding: 20px;
            border-radius: 8px;
            margin-top: 15px;
        }
        .total-summary .amount {
            font-size: 32px;
            font-weight: bold;
        }
        .price {
            text-align: right;
            font-weight: bold;
        }
        .date {
            font-size: 12px;
            color: #7f8c8d;
        }
        .edit-section {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            border: 2px solid #e9ecef;
        }
        .edit-section h3 {
            color: #2c3e50;
            margin-bottom: 15px;
        }
        .add-form {
            display: grid;
            grid-template-columns: 1fr 2fr 1fr 1fr 1fr auto;
            gap: 10px;
            align-items: center;
            margin-bottom: 15px;
        }
        .add-form input, .add-form select {
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        .add-btn {
            background: #27ae60;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 4px;
            cursor: pointer;
        }
        .add-btn:hover {
            background: #229954;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üõí Ausgaben-Tracker</h1>
        
        <div class="edit-section">
            <h3>‚ûï Neue Ausgabe hinzuf√ºgen</h3>
            <div class="add-form">
                <input type="date" id="newDate" value="">
                <input type="text" id="newArtikel" placeholder="Artikel-Name">
                <select id="newKategorie">
                    <option value="Lebensmittel">Lebensmittel</option>
                    <option value="Getr√§nke">Getr√§nke</option>
                    <option value="Hygiene">Hygiene</option>
                    <option value="Haushalt">Haushalt</option>
                    <option value="Snacks/S√º√ües">Snacks/S√º√ües</option>
                </select>
                <input type="number" id="newPreis" step="0.01" placeholder="Preis">
                <input type="text" id="newShop" placeholder="Shop">
                <button class="add-btn" onclick="addExpense()">Hinzuf√ºgen</button>
            </div>
        </div>
        
        <table id="expenseTable">
            <thead>
                <tr>
                    <th>Datum</th>
                    <th>Artikel</th>
                    <th>Kategorie</th>
                    <th>Preis (‚Ç¨)</th>
                    <th>Shop</th>
                </tr>
            </thead>
            <tbody id="tableBody">
                <!-- Wird automatisch gef√ºllt -->
            </tbody>
        </table>

        <div class="summary-section">
            <h2>üìä Zusammenfassung nach Kategorien</h2>
            <div class="summary-grid">
                <div class="summary-card lebensmittel">
                    <h3>ü•ó Lebensmittel</h3>
                    <div class="amount" id="lebensmittelSum">0,00 ‚Ç¨</div>
                    <div class="percentage" id="lebensmittelPercent">(0,0%)</div>
                </div>
                <div class="summary-card getranke">
                    <h3>ü•§ Getr√§nke</h3>
                    <div class="amount" id="getrankeSum">0,00 ‚Ç¨</div>
                    <div class="percentage" id="getrankePercent">(0,0%)</div>
                </div>
                <div class="summary-card hygiene">
                    <h3>üß¥ Hygiene</h3>
                    <div class="amount" id="hygieneSum">0,00 ‚Ç¨</div>
                    <div class="percentage" id="hygienePercent">(0,0%)</div>
                </div>
                <div class="summary-card haushalt">
                    <h3>üßΩ Haushalt</h3>
                    <div class="amount" id="haushaltSum">0,00 ‚Ç¨</div>
                    <div class="percentage" id="haushaltPercent">(0,0%)</div>
                </div>
                <div class="summary-card snacks">
                    <h3>üçø Snacks/S√º√ües</h3>
                    <div class="amount" id="snacksSum">0,00 ‚Ç¨</div>
                    <div class="percentage" id="snacksPercent">(0,0%)</div>
                </div>
            </div>
            
            <div class="total-summary">
                <h2>üí∞ Gesamtausgaben</h2>
                <div class="amount" id="totalSum">0,00 ‚Ç¨</div>
                <p style="margin: 10px 0 0 0; font-size: 14px; opacity: 0.8;" id="dateRange">
                    Zeitraum wird automatisch berechnet
                </p>
            </div>
        </div>
    </div>

    <script>
        // Deine Ausgabendaten direkt im Code
        const expenses = [
            {datum: '23.08.2025', artikel: 'Bio Bananen (0.378 kg)', kategorie: 'Lebensmittel', preis: 0.75, shop: 'Penny'},
            {datum: '23.08.2025', artikel: 'Vollkorn Sandwich', kategorie: 'Lebensmittel', preis: 1.09, shop: 'Penny'},
            {datum: '23.08.2025', artikel: 'Heidelbeere 300g', kategorie: 'Lebensmittel', preis: 2.99, shop: 'Penny'},
            {datum: '23.08.2025', artikel: 'Nuss-Mix', kategorie: 'Snacks/S√º√ües', preis: 2.99, shop: 'Penny'},
            {datum: '23.08.2025', artikel: 'Gem√ºsezwiebeln', kategorie: 'Lebensmittel', preis: 1.69, shop: 'Penny'},
            {datum: '23.08.2025', artikel: 'Knoblauch', kategorie: 'Lebensmittel', preis: 0.99, shop: 'Penny'},
            {datum: '23.08.2025', artikel: 'Paprika rot', kategorie: 'Lebensmittel', preis: 1.69, shop: 'Penny'},
            {datum: '23.08.2025', artikel: 'K√∂lln Schoko M√ºs', kategorie: 'Snacks/S√º√ües', preis: 2.49, shop: 'Penny'},
            {datum: '23.08.2025', artikel: 'Oliven√∂l', kategorie: 'Lebensmittel', preis: 4.99, shop: 'Penny'},
            {datum: '23.08.2025', artikel: 'San Fabio Sauce', kategorie: 'Lebensmittel', preis: 1.49, shop: 'Penny'},
            {datum: '23.08.2025', artikel: 'Barilla Rustico', kategorie: 'Lebensmittel', preis: 1.89, shop: 'Penny'},
            {datum: '23.08.2025', artikel: 'Penny Tasche', kategorie: 'Haushalt', preis: 1.99, shop: 'Penny'},
            {datum: '30.08.2025', artikel: 'Ingwer Bio (0.136 kg)', kategorie: 'Lebensmittel', preis: 0.67, shop: 'Lidl'},
            {datum: '30.08.2025', artikel: 'Bananen Fairtrade (1.052 kg)', kategorie: 'Lebensmittel', preis: 1.78, shop: 'Lidl'},
            {datum: '30.08.2025', artikel: 'Kiwi Gold', kategorie: 'Lebensmittel', preis: 1.19, shop: 'Lidl'},
            {datum: '30.08.2025', artikel: 'Avocado vorger.', kategorie: 'Lebensmittel', preis: 0.69, shop: 'Lidl'},
            {datum: '30.08.2025', artikel: 'Bio M√∂hren', kategorie: 'Lebensmittel', preis: 1.49, shop: 'Lidl'},
            {datum: '30.08.2025', artikel: 'Netzsack Saite', kategorie: 'Lebensmittel', preis: 0.39, shop: 'Lidl'},
            {datum: '30.08.2025', artikel: 'Zitronens√§fte', kategorie: 'Getr√§nke', preis: 2.59, shop: 'Lidl'},
            {datum: '30.08.2025', artikel: 'Blutorange Chili', kategorie: 'Getr√§nke', preis: 4.49, shop: 'Lidl'},
            {datum: '30.08.2025', artikel: 'Hela Ketchup delikat', kategorie: 'Lebensmittel', preis: 3.39, shop: 'Lidl'},
            {datum: '30.08.2025', artikel: 'Heinz Ketchup zero', kategorie: 'Lebensmittel', preis: 3.79, shop: 'Lidl'},
            {datum: '30.08.2025', artikel: 'Delikat Mayonnaise', kategorie: 'Lebensmittel', preis: 1.59, shop: 'Lidl'},
            {datum: '30.08.2025', artikel: 'Klare Suppe mit Rind', kategorie: 'Lebensmittel', preis: 3.89, shop: 'Lidl'},
            {datum: '30.08.2025', artikel: 'Maggi W√ºrze', kategorie: 'Lebensmittel', preis: 2.49, shop: 'Lidl'},
            {datum: '30.08.2025', artikel: 'Rinder-Br√ºhe', kategorie: 'Lebensmittel', preis: 0.99, shop: 'Lidl'},
            {datum: '30.08.2025', artikel: 'Gem√ºse-Br√ºhe', kategorie: 'Lebensmittel', preis: 0.99, shop: 'Lidl'},
            {datum: '30.08.2025', artikel: 'L√∂wensenf mittlelsch.', kategorie: 'Lebensmittel', preis: 1.89, shop: 'Lidl'},
            {datum: '30.08.2025', artikel: 'Barilla Spaghettini (2x)', kategorie: 'Lebensmittel', preis: 3.58, shop: 'Lidl'},
            {datum: '30.08.2025', artikel: 'Barilla Fusilli (2x)', kategorie: 'Lebensmittel', preis: 3.58, shop: 'Lidl'},
            {datum: '30.08.2025', artikel: 'Passierte Tomaten (24x)', kategorie: 'Lebensmittel', preis: 15.36, shop: 'Lidl'},
            {datum: '30.08.2025', artikel: 'Gehackte Tomaten (24x)', kategorie: 'Lebensmittel', preis: 14.16, shop: 'Lidl'},
            {datum: '30.08.2025', artikel: 'Erbsen sehr fein (12x)', kategorie: 'Lebensmittel', preis: 10.68, shop: 'Lidl'},
            {datum: '30.08.2025', artikel: 'Sonnenmais (12x)', kategorie: 'Lebensmittel', preis: 11.88, shop: 'Lidl'},
            {datum: '30.08.2025', artikel: 'Gesch√§lte Tomaten (12x)', kategorie: 'Lebensmittel', preis: 6.60, shop: 'Lidl'},
            {datum: '30.08.2025', artikel: 'Kokosnuss Mil Normal (12x)', kategorie: 'Lebensmittel', preis: 14.28, shop: 'Lidl'},
            {datum: '30.08.2025', artikel: 'Kidney Bohnen (12x)', kategorie: 'Lebensmittel', preis: 8.28, shop: 'Lidl'},
            {datum: '30.08.2025', artikel: 'Walnusskerne', kategorie: 'Lebensmittel', preis: 2.99, shop: 'Lidl'},
            {datum: '30.08.2025', artikel: 'Nuts Royal', kategorie: 'Snacks/S√º√ües', preis: 1.09, shop: 'Lidl'},
            {datum: '30.08.2025', artikel: 'Vollkorn Sandwich', kategorie: 'Lebensmittel', preis: 1.69, shop: 'Lidl'},
            {datum: '30.08.2025', artikel: 'Superfood Mexiko (2x)', kategorie: 'Lebensmittel', preis: 5.98, shop: 'Lidl'},
            {datum: '30.08.2025', artikel: 'Pizzately M. Sauce', kategorie: 'Lebensmittel', preis: 1.99, shop: 'Lidl'},
            {datum: '30.08.2025', artikel: 'Mozzarella gerieben', kategorie: 'Lebensmittel', preis: 1.99, shop: 'Lidl'},
            {datum: '30.08.2025', artikel: 'Japanische Soja', kategorie: 'Lebensmittel', preis: 0.99, shop: 'Lidl'},
            {datum: '30.08.2025', artikel: 'Rama Margarine 60%lg', kategorie: 'Lebensmittel', preis: 1.89, shop: 'Lidl'},
            {datum: '30.08.2025', artikel: 'Bio Eier UK1 10er', kategorie: 'Lebensmittel', preis: 3.39, shop: 'Lidl'},
            {datum: '30.08.2025', artikel: 'Kamillentee', kategorie: 'Getr√§nke', preis: 0.89, shop: 'Lidl'},
            {datum: '30.08.2025', artikel: 'Fr√ºchtemilch 70%', kategorie: 'Getr√§nke', preis: 1.75, shop: 'Lidl'},
            {datum: '30.08.2025', artikel: 'Earl Anis Fenchel Tee', kategorie: 'Getr√§nke', preis: 1.19, shop: 'Lidl'},
            {datum: '30.08.2025', artikel: 'Valensina Nektar ACE (6x)', kategorie: 'Getr√§nke', preis: 8.70, shop: 'Lidl'},
            {datum: '30.08.2025', artikel: 'Pfand 0.25l (6x)', kategorie: 'Getr√§nke', preis: 1.50, shop: 'Lidl'},
            {datum: '30.08.2025', artikel: 'Lipton Pfirsich Zero (6x)', kategorie: 'Getr√§nke', preis: 7.74, shop: 'Lidl'},
            {datum: '30.08.2025', artikel: 'Pfand 0.25l M (6x)', kategorie: 'Getr√§nke', preis: 1.50, shop: 'Lidl'},
            {datum: '30.08.2025', artikel: 'Funny Frisch ungarisch', kategorie: 'Snacks/S√º√ües', preis: 1.99, shop: 'Lidl'},
            {datum: '30.08.2025', artikel: 'M√§rchenwelt Sauer (2x)', kategorie: 'Snacks/S√º√ües', preis: 1.98, shop: 'Lidl'},
            {datum: '30.08.2025', artikel: 'Sp√ºlmaschpflege', kategorie: 'Haushalt', preis: 1.45, shop: 'Lidl'},
            {datum: '30.08.2025', artikel: 'Colorwaschmittel', kategorie: 'Haushalt', preis: 4.25, shop: 'Lidl'},
            {datum: '30.08.2025', artikel: 'Kalkstopp Tabs', kategorie: 'Haushalt', preis: 3.25, shop: 'Lidl'},
            {datum: '30.08.2025', artikel: 'WS Spezial-Salz', kategorie: 'Haushalt', preis: 0.80, shop: 'Lidl'},
            {datum: '30.08.2025', artikel: 'Somat Ex.4in1ca.80AM', kategorie: 'Haushalt', preis: 12.99, shop: 'Lidl'},
            {datum: '30.08.2025', artikel: 'WC Rein. Power Lemon', kategorie: 'Haushalt', preis: 0.95, shop: 'Lidl'},
            {datum: '30.08.2025', artikel: 'Colgate Sens White A', kategorie: 'Hygiene', preis: 4.89, shop: 'Lidl'},
            {datum: '30.08.2025', artikel: 'Swiffer Starterset', kategorie: 'Haushalt', preis: 4.49, shop: 'Lidl'},
            {datum: '30.08.2025', artikel: 'Aluminiumfolie', kategorie: 'Haushalt', preis: 2.89, shop: 'Lidl'},
            {datum: '30.08.2025', artikel: 'Toilettenpapier 3lg.', kategorie: 'Hygiene', preis: 3.77, shop: 'Lidl'},
            {datum: '30.08.2025', artikel: 'K√ºchent√ºcher 3-lagig', kategorie: 'Haushalt', preis: 2.85, shop: 'Lidl'}
        ];

        // Neue Ausgabe hinzuf√ºgen
        function addExpense() {
            const datum = document.getElementById('newDate').value;
            const artikel = document.getElementById('newArtikel').value;
            const kategorie = document.getElementById('newKategorie').value;
            const preis = parseFloat(document.getElementById('newPreis').value);
            const shop = document.getElementById('newShop').value;

            if (!datum || !artikel || !preis || !shop) {
                alert('Bitte alle Felder ausf√ºllen!');
                return;
            }

            // Datum konvertieren (von YYYY-MM-DD zu DD.MM.YYYY)
            const [year, month, day] = datum.split('-');
            const germanDate = `${day}.${month}.${year}`;

            expenses.push({
                datum: germanDate,
                artikel: artikel,
                kategorie: kategorie,
                preis: preis,
                shop: shop
            });

            // Formular zur√ºcksetzen
            document.getElementById('newDate').value = '';
            document.getElementById('newArtikel').value = '';
            document.getElementById('newPreis').value = '';
            document.getElementById('newShop').value = '';

            // Tabelle neu laden
            displayExpenses();
            calculateSums();
        }

        // Tabelle f√ºllen
        function displayExpenses() {
            const tbody = document.getElementById('tableBody');
            tbody.innerHTML = '';
            
            // Nach Datum sortieren
            const sortedExpenses = expenses.sort((a, b) => {
                const dateA = new Date(a.datum.split('.').reverse().join('-'));
                const dateB = new Date(b.datum.split('.').reverse().join('-'));
                return dateA - dateB;
            });
            
            sortedExpenses.forEach(expense => {
                const row = document.createElement('tr');
                const categoryClass = 'category-' + expense.kategorie.toLowerCase()
                    .replace(/[√§√∂√º√ü]/g, (match) => {
                        const map = {'√§': 'a', '√∂': 'o', '√º': 'u', '√ü': 'ss'};
                        return map[match];
                    })
                    .replace(/[^a-z]/g, '');
                
                row.innerHTML = `
                    <td>${expense.datum}</td>
                    <td>${expense.artikel}</td>
                    <td class="${categoryClass}">${expense.kategorie}</td>
                    <td class="price">${expense.preis.toFixed(2).replace('.', ',')}</td>
                    <td>${expense.shop}</td>
                `;
                tbody.appendChild(row);
            });
        }

        // Summen berechnen
        function calculateSums() {
            let sums = {
                lebensmittel: 0,
                getr√§nke: 0,
                hygiene: 0,
                haushalt: 0,
                snacks: 0,
                total: 0
            };

            let dates = [];

            expenses.forEach(expense => {
                const category = expense.kategorie.toLowerCase();
                const price = expense.preis;
                
                if (category.includes('lebensmittel')) {
                    sums.lebensmittel += price;
                } else if (category.includes('getr√§nke')) {
                    sums.getr√§nke += price;
                } else if (category.includes('hygiene')) {
                    sums.hygiene += price;
                } else if (category.includes('haushalt')) {
                    sums.haushalt += price;
                } else if (category.includes('snacks') || category.includes('s√º√ües')) {
                    sums.snacks += price;
                }
                
                sums.total += price;
                dates.push(expense.datum);
            });

            // Datum-Range berechnen
            const uniqueDates = [...new Set(dates)].sort((a, b) => {
                const dateA = new Date(a.split('.').reverse().join('-'));
                const dateB = new Date(b.split('.').reverse().join('-'));
                return dateA - dateB;
            });
            
            const dateRange = uniqueDates.length > 1 
                ? `${uniqueDates[0]} - ${uniqueDates[uniqueDates.length - 1]}`
                : uniqueDates[0] || '';

            // Update der Anzeige mit Prozenten
            document.getElementById('lebensmittelSum').textContent = sums.lebensmittel.toFixed(2).replace('.', ',') + ' ‚Ç¨';
            document.getElementById('lebensmittelPercent').textContent = '(' + (sums.lebensmittel/sums.total*100).toFixed(1) + '%)';
            
            document.getElementById('getrankeSum').textContent = sums.getr√§nke.toFixed(2).replace('.', ',') + ' ‚Ç¨';
            document.getElementById('getrankePercent').textContent = '(' + (sums.getr√§nke/sums.total*100).toFixed(1) + '%)';
            
            document.getElementById('hygieneSum').textContent = sums.hygiene.toFixed(2).replace('.', ',') + ' ‚Ç¨';
            document.getElementById('hygienePercent').textContent = '(' + (sums.hygiene/sums.total*100).toFixed(1) + '%)';
            
            document.getElementById('haushaltSum').textContent = sums.haushalt.toFixed(2).replace('.', ',') + ' ‚Ç¨';
            document.getElementById('haushaltPercent').textContent = '(' + (sums.haushalt/sums.total*100).toFixed(1) + '%)';
            
            document.getElementById('snacksSum').textContent = sums.snacks.toFixed(2).replace('.', ',') + ' ‚Ç¨';
            document.getElementById('snacksPercent').textContent = '(' + (sums.snacks/sums.total*100).toFixed(1) + '%)';
            
            document.getElementById('totalSum').textContent = sums.total.toFixed(2).replace('.', ',') + ' ‚Ç¨';
            document.getElementById('dateRange').textContent = 'Zeitraum: ' + dateRange;
        }

        // Heute als Standard-Datum setzen
        function setTodayAsDefault() {
            const today = new Date();
            const germanToday = today.toISOString().split('T')[0];
            document.getElementById('newDate').value = germanToday;
        }

        // Beim Laden der Seite
        window.addEventListener('load', function() {
            displayExpenses();
            calculateSums();
            setTodayAsDefault();
        });
    </script>
</body>
</html>
